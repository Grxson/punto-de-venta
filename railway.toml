# Configuraci√≥n de Railway para el backend
# https://docs.railway.app/reference/config-as-code

[build]
builder = "DOCKERFILE"
dockerfilePath = "backend/Dockerfile"

[deploy]
startCommand = "java -XX:+UseContainerSupport -XX:MaxRAMPercentage=75.0 -Dspring.profiles.active=railway -jar app.jar"
healthcheckPath = "/actuator/health/liveness"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 5

# Variables de entorno para el build
[build.env]
MAVEN_OPTS = "-Xmx2048m -Dmaven.artifact.threads=5"
JAVA_TOOL_OPTIONS = "-Xmx2048m"

# Variables de entorno para runtime
[deploy.env]
SPRING_PROFILES_ACTIVE = "railway"
JAVA_OPTS = "-XX:+UseContainerSupport -XX:MaxRAMPercentage=75.0"
