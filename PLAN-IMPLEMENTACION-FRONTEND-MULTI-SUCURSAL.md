# ğŸ¯ Plan de ImplementaciÃ³n: Sistema Multi-Sucursal + Admin Frontend\n\n**Fecha**: 6 de diciembre de 2025  \n**Estado**: ğŸ“‹ PlanificaciÃ³n completa  \n**DuraciÃ³n estimada**: 3-4 dÃ­as  \n**Complejidad**: ğŸ”´ Media-Alta\n\n---\n\n## ğŸ“Š VisiÃ³n General\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                    SISTEMA POS COMPLETO                 â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                         â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚\nâ”‚  â”‚   USUARIO BASE  â”‚        â”‚ USUARIO ADMIN    â”‚       â”‚\nâ”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚\nâ”‚  â”‚ â€¢ Sucursal: 1   â”‚        â”‚ â€¢ Sucursal: TODASâ”‚       â”‚\nâ”‚  â”‚ â€¢ MenÃº: 1       â”‚        â”‚ â€¢ MenÃº: TODAS    â”‚       â”‚\nâ”‚  â”‚ â€¢ Ventas: 1     â”‚        â”‚ â€¢ Ventas: TODAS  â”‚       â”‚\nâ”‚  â”‚ â€¢ Gastos: 1     â”‚        â”‚ â€¢ Gastos: TODAS  â”‚       â”‚\nâ”‚  â”‚ â€¢ Reportes: 1   â”‚        â”‚ â€¢ Reportes: SEG. â”‚       â”‚\nâ”‚  â”‚ â€¢ Cortes: 1     â”‚        â”‚ â€¢ Filtro: SÃ     â”‚       â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚\nâ”‚                                                         â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## ğŸ—ï¸ Arquitectura Nueva\n\n### 1. Contextos (Context API)\n\n```typescript\n// AuthContext - Maneja autenticaciÃ³n y usuario actual\ninterface AuthContextType {\n  user: UsuarioDTO | null;\n  token: string | null;\n  sucursal: SucursalDTO | null;\n  isAdmin: boolean;\n  login: (username, password) => Promise<void>;\n  logout: () => Promise<void>;\n  setSucursal: (sucursal) => void;\n}\n\n// MenuContext - Maneja menÃº y productos\ninterface MenuContextType {\n  productos: ProductoDTO[];\n  categorias: CategoriaDTO[];\n  productosAgrupados: Map<CategoriaId, ProductoDTO[]>;\n  cargar: (sucursalId) => Promise<void>;\n}\n\n// ReporteContext - Maneja reportes y filtros\ninterface ReporteContextType {\n  reporteGeneral: ReporteDTO; // Todas las sucursales\n  reportePorSucursal: ReporteDTO; // Sucursal actual\n  filtroSucursal: SucursalId | null; // Admin: filtrar por sucursal\n  setFiltroSucursal: (sucursalId) => void;\n  cargarReportes: () => Promise<void>;\n}\n```\n\n### 2. Estructura de Carpetas Nueva\n\n```\nfrontend/src/\nâ”œâ”€â”€ components/\nâ”‚   â”œâ”€â”€ auth/\nâ”‚   â”‚   â”œâ”€â”€ LoginScreen.tsx          (existente, mejorar)\nâ”‚   â”‚   â””â”€â”€ LogoutButton.tsx         (nuevo)\nâ”‚   â”œâ”€â”€ navigation/\nâ”‚   â”‚   â”œâ”€â”€ AdminNavigator.tsx       (nuevo)\nâ”‚   â”‚   â”œâ”€â”€ UserNavigator.tsx        (nuevo)\nâ”‚   â”‚   â””â”€â”€ TabNavigator.tsx         (nuevo)\nâ”‚   â”œâ”€â”€ menu/\nâ”‚   â”‚   â”œâ”€â”€ MenuScreen.tsx           (nuevo)\nâ”‚   â”‚   â”œâ”€â”€ ProductoItem.tsx         (nuevo)\nâ”‚   â”‚   â”œâ”€â”€ CategoriaTab.tsx         (nuevo)\nâ”‚   â”‚   â””â”€â”€ SelectorSucursal.tsx     (nuevo - para admin)\nâ”‚   â”œâ”€â”€ ventas/\nâ”‚   â”‚   â”œâ”€â”€ VentasScreen.tsx         (existente, mejorar)\nâ”‚   â”‚   â”œâ”€â”€ ListaVentas.tsx          (nuevo)\nâ”‚   â”‚   â””â”€â”€ DetalleVenta.tsx         (nuevo)\nâ”‚   â”œâ”€â”€ gastos/\nâ”‚   â”‚   â”œâ”€â”€ GastosScreen.tsx         (existente, mejorar)\nâ”‚   â”‚   â”œâ”€â”€ ListaGastos.tsx          (nuevo)\nâ”‚   â”‚   â””â”€â”€ FormGasto.tsx            (nuevo)\nâ”‚   â”œâ”€â”€ reportes/\nâ”‚   â”‚   â”œâ”€â”€ ReportesScreen.tsx       (nuevo)\nâ”‚   â”‚   â”œâ”€â”€ ReportesAdmin.tsx        (nuevo)\nâ”‚   â”‚   â”œâ”€â”€ GraficoVentas.tsx        (nuevo)\nâ”‚   â”‚   â”œâ”€â”€ GraficoGastos.tsx        (nuevo)\nâ”‚   â”‚   â””â”€â”€ FiltroSucursal.tsx       (nuevo)\nâ”‚   â”œâ”€â”€ admin/\nâ”‚   â”‚   â”œâ”€â”€ AdminScreen.tsx          (nuevo)\nâ”‚   â”‚   â”œâ”€â”€ ManagementSucursales.tsx (nuevo)\nâ”‚   â”‚   â”œâ”€â”€ ManagementUsuarios.tsx   (nuevo)\nâ”‚   â”‚   â””â”€â”€ ManagementProductos.tsx  (nuevo)\nâ”‚   â””â”€â”€ common/\nâ”‚       â”œâ”€â”€ Header.tsx               (nuevo)\nâ”‚       â”œâ”€â”€ Footer.tsx               (nuevo)\nâ”‚       â””â”€â”€ LoadingSpinner.tsx       (nuevo)\nâ”‚\nâ”œâ”€â”€ contexts/\nâ”‚   â”œâ”€â”€ AuthContext.tsx              (nuevo)\nâ”‚   â”œâ”€â”€ MenuContext.tsx              (nuevo)\nâ”‚   â”œâ”€â”€ ReporteContext.tsx           (nuevo)\nâ”‚   â””â”€â”€ AppContextProvider.tsx       (nuevo)\nâ”‚\nâ”œâ”€â”€ hooks/\nâ”‚   â”œâ”€â”€ useAuth.ts                   (nuevo)\nâ”‚   â”œâ”€â”€ useMenu.ts                   (nuevo)\nâ”‚   â”œâ”€â”€ useApi.ts                    (mejorado)\nâ”‚   â”œâ”€â”€ useReportes.ts               (nuevo)\nâ”‚   â””â”€â”€ useSucursal.ts               (nuevo)\nâ”‚\nâ”œâ”€â”€ services/\nâ”‚   â”œâ”€â”€ api/\nâ”‚   â”‚   â”œâ”€â”€ authService.ts           (nuevo/mejorado)\nâ”‚   â”‚   â”œâ”€â”€ menuService.ts           (nuevo)\nâ”‚   â”‚   â”œâ”€â”€ ventasService.ts         (nuevo/mejorado)\nâ”‚   â”‚   â”œâ”€â”€ gastosService.ts         (nuevo/mejorado)\nâ”‚   â”‚   â”œâ”€â”€ reportesService.ts       (nuevo)\nâ”‚   â”‚   â””â”€â”€ axiosInstance.ts         (nuevo)\nâ”‚   â””â”€â”€ storage/\nâ”‚       â””â”€â”€ AsyncStorageService.ts   (nuevo)\nâ”‚\nâ”œâ”€â”€ types/\nâ”‚   â”œâ”€â”€ auth.ts                      (nuevo)\nâ”‚   â”œâ”€â”€ menu.ts                      (nuevo)\nâ”‚   â”œâ”€â”€ ventas.ts                    (mejorado)\nâ”‚   â”œâ”€â”€ gastos.ts                    (mejorado)\nâ”‚   â”œâ”€â”€ reportes.ts                  (nuevo)\nâ”‚   â””â”€â”€ api.ts                       (nuevo)\nâ”‚\nâ”œâ”€â”€ utils/\nâ”‚   â”œâ”€â”€ dateUtils.ts                 (nuevo)\nâ”‚   â”œâ”€â”€ formatUtils.ts               (nuevo)\nâ”‚   â””â”€â”€ validationUtils.ts           (nuevo)\nâ”‚\nâ””â”€â”€ App.tsx                          (actualizar)\n```\n\n---\n\n## ğŸ” Flujo de AutenticaciÃ³n\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                  LOGIN FLOW (Mejorado)                  â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                         â”‚\nâ”‚ 1. Usuario ingresa credenciales                        â”‚\nâ”‚    â†“                                                    â”‚\nâ”‚ 2. POST /api/auth/login                                â”‚\nâ”‚    â†“                                                    â”‚\nâ”‚ 3. Backend retorna:                                    â”‚\nâ”‚    {                                                   â”‚\nâ”‚      token: JWT,                                       â”‚\nâ”‚      usuario: {                                        â”‚\nâ”‚        id, nombre, email,                              â”‚\nâ”‚        rol, sucursal_id, permisos                       â”‚\nâ”‚      }                                                 â”‚\nâ”‚    }                                                   â”‚\nâ”‚    â†“                                                    â”‚\nâ”‚ 4. Frontend guardar en AsyncStorage:                   â”‚\nâ”‚    - token (encriptado)                                â”‚\nâ”‚    - usuario (JSON)                                    â”‚\nâ”‚    - sucursal (JSON)                                   â”‚\nâ”‚    â†“                                                    â”‚\nâ”‚ 5. Validar rol:                                        â”‚\nâ”‚    - Si es ADMIN â†’ AdminNavigator                      â”‚\nâ”‚    - Si es USER â†’ UserNavigator                        â”‚\nâ”‚    â†“                                                    â”‚\nâ”‚ 6. Cargar contextos:                                   â”‚\nâ”‚    - AuthContext âœ…                                    â”‚\nâ”‚    - MenuContext (cargar productos)                    â”‚\nâ”‚    - ReporteContext (cargar datos)                     â”‚\nâ”‚    â†“                                                    â”‚\nâ”‚ 7. Mostrar Home/Dashboard                              â”‚\nâ”‚                                                         â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## ğŸ‘¥ Modelos de Datos\n\n### UsuarioDTO\n```typescript\ninterface UsuarioDTO {\n  id: number;\n  nombre: string;\n  email: string;\n  rol: 'ADMIN' | 'GERENTE' | 'VENDEDOR' | 'USUARIO';\n  sucursal_id: number;\n  activo: boolean;\n  permisos: string[];\n  createdAt: string;\n}\n```\n\n### SucursalDTO\n```typescript\ninterface SucursalDTO {\n  id: number;\n  nombre: string;\n  direccion: string;\n  email: string;\n  telefono: string;\n  activa: boolean;\n}\n```\n\n### ReporteDTO\n```typescript\ninterface ReporteDTO {\n  periodo: {\n    inicio: string;    // YYYY-MM-DD\n    fin: string;       // YYYY-MM-DD\n  };\n  ventas: {\n    total: number;\n    cantidad: number;\n    promedio: number;\n    porDetalle: CategoriaVenta[];\n  };\n  gastos: {\n    total: number;\n    cantidad: number;\n    promedio: number;\n    porCategoria: CategoriaGasto[];\n  };\n  ganancias: {\n    neto: number;      // ventas - gastos\n    margen: number;    // % margen\n  };\n  sucursales?: Map<SucursalId, ReporteDTO>; // Para admin\n}\n```\n\n---\n\n## ğŸ“± Pantallas por Rol\n\n### Usuario Normal (USER / VENDEDOR)\n```\nTabs:\nâ”œâ”€â”€ ğŸ  HOME\nâ”‚   â”œâ”€â”€ Bienvenida: \"Hola, [Nombre]\"\nâ”‚   â”œâ”€â”€ Sucursal actual: [Nombre]\nâ”‚   â”œâ”€â”€ Resumen del dÃ­a\nâ”‚   â”‚   â”œâ”€â”€ Ventas hoy: $XXX\nâ”‚   â”‚   â”œâ”€â”€ Gastos hoy: $XXX\nâ”‚   â”‚   â””â”€â”€ Ganancia hoy: $XXX\nâ”‚   â””â”€â”€ Acciones rÃ¡pidas\nâ”‚       â”œâ”€â”€ Nueva venta\nâ”‚       â”œâ”€â”€ Nuevo gasto\nâ”‚       â””â”€â”€ Ver corte\nâ”‚\nâ”œâ”€â”€ ğŸ“‹ MENÃš\nâ”‚   â”œâ”€â”€ Selector de sucursal (deshabilitado, mostrar actual)\nâ”‚   â”œâ”€â”€ Tabs por categorÃ­a\nâ”‚   â”œâ”€â”€ Productos de sucursal\nâ”‚   â””â”€â”€ Carrito de compra\nâ”‚\nâ”œâ”€â”€ ğŸ’° VENTAS\nâ”‚   â”œâ”€â”€ Nueva venta\nâ”‚   â”œâ”€â”€ Historial de ventas\nâ”‚   â”‚   â”œâ”€â”€ Filtrar por fecha\nâ”‚   â”‚   â”œâ”€â”€ Filtrar por cliente\nâ”‚   â”‚   â””â”€â”€ Ver detalles\nâ”‚   â””â”€â”€ Corte de caja\nâ”‚\nâ”œâ”€â”€ ğŸ’¸ GASTOS\nâ”‚   â”œâ”€â”€ Nuevo gasto\nâ”‚   â”œâ”€â”€ Historial de gastos\nâ”‚   â”‚   â”œâ”€â”€ Filtrar por categorÃ­a\nâ”‚   â”‚   â”œâ”€â”€ Filtrar por fecha\nâ”‚   â”‚   â””â”€â”€ Ver detalles\nâ”‚   â””â”€â”€ Resumen por categorÃ­a\nâ”‚\nâ””â”€â”€ ğŸ‘¤ PERFIL\n    â”œâ”€â”€ Mi informaciÃ³n\n    â”œâ”€â”€ Mi sucursal\n    â”œâ”€â”€ Cambiar contraseÃ±a\n    â””â”€â”€ Cerrar sesiÃ³n\n```\n\n### Usuario Admin (ADMIN)\n```\nTabs:\nâ”œâ”€â”€ ğŸ“Š DASHBOARD GENERAL\nâ”‚   â”œâ”€â”€ Resumen de todas las sucursales\nâ”‚   â”œâ”€â”€ GrÃ¡ficos de ventas (todas)\nâ”‚   â”œâ”€â”€ GrÃ¡ficos de gastos (todas)\nâ”‚   â”œâ”€â”€ KPIs principales\nâ”‚   â””â”€â”€ Alertas crÃ­ticas\nâ”‚\nâ”œâ”€â”€ ğŸ“ˆ REPORTES\nâ”‚   â”œâ”€â”€ Reporte general\nâ”‚   â”‚   â”œâ”€â”€ PerÃ­odo selector\nâ”‚   â”‚   â”œâ”€â”€ Tabla con todas las sucursales\nâ”‚   â”‚   â””â”€â”€ GrÃ¡ficos comparativos\nâ”‚   â”‚\nâ”‚   â”œâ”€â”€ Por sucursal\nâ”‚   â”‚   â”œâ”€â”€ Selector de sucursal\nâ”‚   â”‚   â”œâ”€â”€ Detalles de ventas\nâ”‚   â”‚   â”œâ”€â”€ Detalles de gastos\nâ”‚   â”‚   â””â”€â”€ GrÃ¡ficos especÃ­ficos\nâ”‚   â”‚\nâ”‚   â”œâ”€â”€ Por perÃ­odo\nâ”‚   â”‚   â”œâ”€â”€ Rango de fechas\nâ”‚   â”‚   â””â”€â”€ ComparaciÃ³n temporal\nâ”‚   â”‚\nâ”‚   â””â”€â”€ Exportar\nâ”‚       â”œâ”€â”€ PDF\nâ”‚       â”œâ”€â”€ CSV\nâ”‚       â””â”€â”€ Excel\nâ”‚\nâ”œâ”€â”€ ğŸ¢ ADMINISTRACIÃ“N\nâ”‚   â”œâ”€â”€ Sucursales\nâ”‚   â”‚   â”œâ”€â”€ Listar\nâ”‚   â”‚   â”œâ”€â”€ Crear\nâ”‚   â”‚   â”œâ”€â”€ Editar\nâ”‚   â”‚   â””â”€â”€ Cambiar estado\nâ”‚   â”‚\nâ”‚   â”œâ”€â”€ Usuarios\nâ”‚   â”‚   â”œâ”€â”€ Listar por sucursal\nâ”‚   â”‚   â”œâ”€â”€ Crear\nâ”‚   â”‚   â”œâ”€â”€ Editar\nâ”‚   â”‚   â”œâ”€â”€ Cambiar rol\nâ”‚   â”‚   â””â”€â”€ Deshabilitar\nâ”‚   â”‚\nâ”‚   â”œâ”€â”€ Productos\nâ”‚   â”‚   â”œâ”€â”€ Listar\nâ”‚   â”‚   â”œâ”€â”€ Crear\nâ”‚   â”‚   â”œâ”€â”€ Editar precios por sucursal\nâ”‚   â”‚   â”œâ”€â”€ Editar disponibilidad\nâ”‚   â”‚   â””â”€â”€ Orden visual por sucursal\nâ”‚   â”‚\nâ”‚   â””â”€â”€ ConfiguraciÃ³n\nâ”‚       â”œâ”€â”€ General\nâ”‚       â”œâ”€â”€ Impuestos\nâ”‚       â””â”€â”€ MÃ©todos de pago\nâ”‚\nâ”œâ”€â”€ ğŸ” MONITOR\nâ”‚   â”œâ”€â”€ Actividad en tiempo real\nâ”‚   â”œâ”€â”€ Ãšltimas transacciones\nâ”‚   â”œâ”€â”€ Usuarios conectados\nâ”‚   â””â”€â”€ Logs de sistema\nâ”‚\nâ””â”€â”€ ğŸ‘¤ PERFIL\n    â”œâ”€â”€ Mi informaciÃ³n\n    â”œâ”€â”€ Cambiar contraseÃ±a\n    â””â”€â”€ Cerrar sesiÃ³n\n```\n\n---\n\n## ğŸ”„ Flujos Principales\n\n### Flujo 1: Usuario Ve su MenÃº\n```\n1. Usuario login\n2. Token â†’ AsyncStorage\n3. usuario.sucursal_id = 1\n4. MenuContext.cargar(1)\n5. GET /api/sucursales/1/productos\n6. Productos agrupados por categorÃ­a\n7. Mostrar tabs de categorÃ­as\n8. Usuario selecciona producto\n9. Agregar al carrito\n```\n\n### Flujo 2: Usuario Hace Venta\n```\n1. MenuScreen â†’ carrito con productos\n2. Usuario confirma venta\n3. POST /api/ventas\n4. Backend crea venta y venta_items\n5. Reducir stock en sucursal_productos\n6. Mostrar confirmaciÃ³n\n7. Actualizar contador de ventas del dÃ­a\n```\n\n### Flujo 3: Usuario Registra Gasto\n```\n1. GastosScreen â†’ Nuevo gasto\n2. Formulario: categoria, monto, descripciÃ³n, fecha\n3. POST /api/gastos\n4. Backend crea gasto\n5. Mostrar confirmaciÃ³n\n6. Actualizar contador de gastos del dÃ­a\n```\n\n### Flujo 4: Admin Ve Reporte General\n```\n1. AdminNavigator â†’ Dashboard\n2. ReporteContext.cargarReportes()\n3. GET /api/reportes/general?inicio=X&fin=Y\n4. Backend suma ventas+gastos de TODAS las sucursales\n5. GET /api/reportes/por-sucursal?inicio=X&fin=Y\n6. Backend retorna breakdown por sucursal\n7. Mostrar:\n   - Tabla comparativa\n   - GrÃ¡ficos\n   - KPIs\n8. Admin selecciona sucursal\n9. GET /api/reportes/{sucursalId}?inicio=X&fin=Y\n10. Mostrar detalles especÃ­ficos\n```\n\n### Flujo 5: Admin Cambia de Sucursal\n```\n1. Solo para visualizaciÃ³n (no cambia su user)\n2. Selector de sucursal en header\n3. filtroSucursal = sucursalId\n4. Recargar todos los datos\n5. Mostrar datos de esa sucursal\n```\n\n---\n\n## ğŸ› ï¸ Dependencias a Agregar\n\n```json\n{\n  \"dependencies\": {\n    \"axios\": \"^1.6.0\",\n    \"@react-navigation/native\": \"^6.1.0\",\n    \"@react-navigation/bottom-tabs\": \"^6.5.0\",\n    \"@react-navigation/stack\": \"^6.3.0\",\n    \"react-native-screens\": \"^3.26.0\",\n    \"react-native-safe-area-context\": \"^4.7.0\",\n    \"react-native-vector-icons\": \"^10.0.0\",\n    \"@react-native-async-storage/async-storage\": \"^1.21.0\",\n    \"date-fns\": \"^3.0.0\",\n    \"numeral\": \"^2.0.6\",\n    \"react-native-chart-kit\": \"^6.12.0\",\n    \"react-native-gesture-handler\": \"^2.14.0\",\n    \"react-native-reanimated\": \"^3.5.0\",\n    \"jwt-decode\": \"^4.0.0\",\n    \"crypto-js\": \"^4.2.0\"\n  }\n}\n```\n\n---\n\n## ğŸ“ Tareas ImplementaciÃ³n\n\n### Fase 1: AutenticaciÃ³n Mejorada (2 dÃ­as)\n- [ ] AuthContext con Redux/Context\n- [ ] LoginScreen mejorado\n- [ ] TokenStorage encriptado\n- [ ] Auto-login al abrir app\n- [ ] Logout seguro\n- [ ] Tests de autenticaciÃ³n\n\n### Fase 2: MenÃºs por Sucursal (2 dÃ­as)\n- [ ] MenuContext\n- [ ] MenuScreen con tabs\n- [ ] ProductoItem component\n- [ ] Carrito de compra\n- [ ] Filtros y bÃºsqueda\n- [ ] Tests de menÃº\n\n### Fase 3: Ventas Mejoradas (2 dÃ­as)\n- [ ] VentasScreen mejorado\n- [ ] Formulario de venta\n- [ ] Selector de cliente\n- [ ] Carrito integrado\n- [ ] MÃ©todos de pago\n- [ ] Generar recibo\n- [ ] Tests de ventas\n\n### Fase 4: Gastos Mejorados (1 dÃ­a)\n- [ ] GastosScreen mejorado\n- [ ] Formulario de gasto\n- [ ] Selector de categorÃ­a\n- [ ] Historial\n- [ ] Filtros\n- [ ] Tests de gastos\n\n### Fase 5: Panel Admin (3 dÃ­as)\n- [ ] Dashboard general\n- [ ] ReporteContext\n- [ ] Reportes por sucursal\n- [ ] GrÃ¡ficos (ventas, gastos, comparativas)\n- [ ] Tabla de comparaciÃ³n\n- [ ] Selector de perÃ­odo\n- [ ] Filtros y bÃºsqueda\n- [ ] Tests de reportes\n\n### Fase 6: AdministraciÃ³n (2 dÃ­as)\n- [ ] Management de sucursales\n- [ ] Management de usuarios\n- [ ] Management de productos\n- [ ] Cambio de estado\n- [ ] Tests de admin\n\n### Fase 7: Testing e IntegraciÃ³n (2 dÃ­as)\n- [ ] Tests unitarios\n- [ ] Tests de integraciÃ³n\n- [ ] Testing manual\n- [ ] Performance\n- [ ] Security\n\n---\n\n## ğŸ¨ Componentes Principales\n\n### AppContextProvider.tsx\n```typescript\nexport function AppContextProvider({ children }) {\n  return (\n    <AuthProvider>\n      <MenuProvider>\n        <ReporteProvider>\n          {children}\n        </ReporteProvider>\n      </MenuProvider>\n    </AuthProvider>\n  );\n}\n```\n\n### Navigation Condicional\n```typescript\nexport function RootNavigator() {\n  const { user, isLoading } = useAuth();\n  \n  if (isLoading) return <SplashScreen />;\n  \n  if (!user) {\n    return <LoginNavigator />;\n  }\n  \n  return user.rol === 'ADMIN' \n    ? <AdminNavigator /> \n    : <UserNavigator />;\n}\n```\n\n---\n\n## ğŸ“Š Endpoints Backend Necesarios\n\n### AutenticaciÃ³n\n- [x] POST /api/auth/login\n- [x] POST /api/auth/logout\n- [ ] POST /api/auth/refresh-token\n- [ ] POST /api/auth/cambiar-password\n\n### MenÃº\n- [x] GET /api/sucursales/{id}/productos\n- [ ] GET /api/categorias\n- [ ] GET /api/productos/buscar?q=X\n\n### Ventas\n- [ ] GET /api/ventas?sucursalId=X&fecha=Y\n- [ ] GET /api/ventas/{id}\n- [ ] POST /api/ventas\n- [ ] PUT /api/ventas/{id}\n- [ ] DELETE /api/ventas/{id}\n\n### Gastos\n- [ ] GET /api/gastos?sucursalId=X&fecha=Y\n- [ ] GET /api/gastos/{id}\n- [ ] POST /api/gastos\n- [ ] PUT /api/gastos/{id}\n- [ ] DELETE /api/gastos/{id}\n\n### Reportes\n- [ ] GET /api/reportes/general?inicio=X&fin=Y\n- [ ] GET /api/reportes/por-sucursal?inicio=X&fin=Y\n- [ ] GET /api/reportes/{sucursalId}?inicio=X&fin=Y\n- [ ] GET /api/reportes/kpis?inicio=X&fin=Y\n\n### Admin\n- [ ] GET /api/sucursales\n- [ ] GET /api/usuarios?sucursalId=X\n- [ ] POST /api/usuarios\n- [ ] PUT /api/usuarios/{id}\n- [ ] DELETE /api/usuarios/{id}\n- [ ] PUT /api/productos/{id}/precio/{sucursalId}\n\n---\n\n## âœ… Checklist de ValidaciÃ³n\n\n### AutenticaciÃ³n\n- [ ] Login con JWT\n- [ ] Token almacenado encriptado\n- [ ] Auto-login al abrir\n- [ ] Logout limpia todo\n- [ ] Rol detectado correctamente\n- [ ] Permisos respetados\n\n### Usuario Normal\n- [ ] Ve solo su sucursal\n- [ ] Ve menÃº de su sucursal\n- [ ] Puede hacer venta\n- [ ] Puede registrar gasto\n- [ ] Ve resumen de su sucursal\n- [ ] No puede acceder a admin\n\n### Usuario Admin\n- [ ] Ve datos de todas las sucursales\n- [ ] Puede filtrar por sucursal\n- [ ] Ve reportes comparativos\n- [ ] Puede crear/editar usuarios\n- [ ] Puede crear/editar sucursales\n- [ ] Puede crear/editar productos\n- [ ] Puede ver logs\n- [ ] Puede exportar reportes\n\n### Seguridad\n- [ ] Token en header Authorization\n- [ ] Token expira y refresca\n- [ ] Endpoints protegidos\n- [ ] Logout cierra sesiÃ³n\n- [ ] No hay datos sensibles en localStorage\n- [ ] HTTPS en producciÃ³n\n\n---\n\n## ğŸš€ PrÃ³ximos Pasos Inmediatos\n\n1. **Hoy (6 dic)**: \n   - [ ] Crear AuthContext.tsx\n   - [ ] Crear useAuth hook\n   - [ ] Mejorar LoginScreen\n   - [ ] Crear AppContextProvider\n\n2. **MaÃ±ana (7 dic)**:\n   - [ ] Crear MenuContext.tsx\n   - [ ] Crear useMenu hook\n   - [ ] Crear MenuScreen\n   - [ ] Crear ProductoItem\n\n3. **DÃ­a 3 (8 dic)**:\n   - [ ] Mejorar VentasScreen\n   - [ ] Mejorar GastosScreen\n   - [ ] Crear ReporteContext\n\n4. **DÃ­a 4 (9 dic)**:\n   - [ ] Admin Dashboard\n   - [ ] Reportes y grÃ¡ficos\n   - [ ] Management screens\n\n---\n\n*Plan creado: 6 de diciembre de 2025*  \n*Estado: ğŸ“‹ LISTO PARA IMPLEMENTACIÃ“N*\n