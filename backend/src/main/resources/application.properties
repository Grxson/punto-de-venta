# ========================================
# PUNTO DE VENTA - CONFIGURACIÓN BACKEND
# Versión: 1.0.0-SNAPSHOT
# Java: 21 LTS
# ========================================

# ----------------------------------------
# Perfil Activo
# ----------------------------------------
spring.profiles.active=dev

# ----------------------------------------
# Información de la Aplicación
# ----------------------------------------
spring.application.name=PuntoDeVentaBackend
app.version=@app.version@
app.build=@app.build@
app.description=API RESTful para sistema de Punto de Venta

# ----------------------------------------
# Servidor
# ----------------------------------------
server.port=8080
server.compression.enabled=true
server.compression.mime-types=application/json,application/xml,text/html,text/xml,text/plain

# ----------------------------------------
# Base de Datos (H2 - Desarrollo)
# ----------------------------------------
spring.datasource.url=jdbc:h2:mem:puntodeventa
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# Consola H2
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.h2.console.settings.web-allow-others=false

# ----------------------------------------
# JPA / Hibernate
# ----------------------------------------
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true
spring.jpa.open-in-view=false

# Deshabilitar scripts SQL iniciales (usaremos Hibernate para crear esquema)
spring.sql.init.mode=never

# ----------------------------------------
# Documentación OpenAPI / Swagger
# ----------------------------------------
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.operations-sorter=method
springdoc.swagger-ui.tags-sorter=alpha
springdoc.swagger-ui.doc-expansion=none
springdoc.swagger-ui.disable-swagger-default-url=true

# Información de la API
springdoc.info.title=Punto de Venta API
springdoc.info.description=API RESTful para gestión de ventas, inventario, finanzas y reportes
springdoc.info.version=@app.version@
springdoc.info.contact.name=Grxson
springdoc.info.contact.url=https://github.com/Grxson/punto-de-venta
springdoc.info.license.name=MIT
springdoc.info.license.url=https://opensource.org/licenses/MIT

# ----------------------------------------
# CORS (Para apps móviles y escritorio)
# ----------------------------------------
cors.allowed-origins=http://localhost:3000,http://localhost:19006,http://localhost:5173,http://localhost:5174,http://localhost:5175,capacitor://localhost,http://localhost,https://localhost
cors.allowed-methods=GET,POST,PUT,PATCH,DELETE,OPTIONS
cors.allowed-headers=*
cors.allow-credentials=true
cors.max-age=3600

# ----------------------------------------
# Seguridad (Temporal - Desarrollo)
# ----------------------------------------
spring.security.user.name=admin
spring.security.user.password=admin123
spring.security.user.roles=ADMIN

# ----------------------------------------
# Actuator
# ----------------------------------------
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized
management.info.env.enabled=true
management.info.java.enabled=true
management.info.build.enabled=true
management.info.git.enabled=true
management.info.os.enabled=true

# ----------------------------------------
# Banner Personalizado
# ----------------------------------------
spring.banner.location=classpath:banner.txt
spring.banner.charset=UTF-8
spring.main.banner-mode=console

# ----------------------------------------
# Logging
# ----------------------------------------
logging.level.root=INFO
logging.level.com.puntodeventa=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
# Formato mejorado para consola (Logback manejará el formato)
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{40} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
# Colores en consola (solo si la terminal lo soporta)
spring.output.ansi.enabled=detect

# ----------------------------------------
# Virtual Threads (Java 21)
# ----------------------------------------
spring.threads.virtual.enabled=true

# ----------------------------------------
# Jackson (JSON)
# ----------------------------------------
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=UTC
spring.jackson.default-property-inclusion=non_null

# ----------------------------------------
# Internacionalización
# ----------------------------------------
spring.messages.basename=messages
spring.messages.encoding=UTF-8

# JWT Configuration
jwt.secret=punto-de-venta-secret-key-2025-debe-ser-muy-larga-para-seguridad-maxima-del-sistema
jwt.expiration=86400000

# CORS
# Context path vacío (raíz) - no usar "/" para evitar problemas con dobles barras
server.servlet.context-path=

# Configuración de recursos estáticos
# Deshabilitar el manejo automático de recursos estáticos para todas las rutas
# Solo se manejarán recursos estáticos explícitamente configurados en WebConfig
spring.web.resources.add-mappings=false