# ========================================
# PERFIL: DESARROLLO (Conectado a Railway PostgreSQL)
# ========================================

# ⚠️ IMPORTANTE: Configura las variables de entorno en .env (ver .env.example)
# Railway te da una URL como: postgresql://USER:PASS@HOST:PORT/DATABASE
# Debes separar los componentes en variables individuales

# Base de Datos PostgreSQL (Railway)
spring.datasource.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:railway}
spring.datasource.username=${DB_USER:postgres}
spring.datasource.password=${DB_PASSWORD:}
spring.datasource.driver-class-name=org.postgresql.Driver

# Pool de conexiones HikariCP optimizado para desarrollo
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# JPA / Hibernate para PostgreSQL
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.open-in-view=false

# NO inicializar esquema ni datos (ya existen en Railway)
spring.sql.init.mode=never
spring.flyway.enabled=false

# Seguridad relajada para desarrollo
spring.security.user.name=admin
spring.security.user.password=admin123

# CORS permisivo (desarrollo)
cors.allowed-origins=http://localhost:3000,http://localhost:19006,http://localhost:8081,http://localhost:5173,http://localhost:5174,http://localhost:5175,capacitor://localhost
cors.allowed-methods=GET,POST,PUT,PATCH,DELETE,OPTIONS
cors.allowed-headers=*
cors.allow-credentials=true
cors.max-age=3600

# Logging detallado
logging.level.com.puntodeventa=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Formato de logging con colores y detalles
logging.pattern.console=%clr(%d{HH:mm:ss.SSS}){faint} %clr(%-5level) %clr(%logger{36}){cyan} - %msg%n

# Servidor
server.port=8080

# JWT Configuration
jwt.secret=punto-de-venta-secret-key-2025-debe-ser-muy-larga-para-seguridad-maxima-del-sistema
jwt.expiration=86400000

# CORS
# Context path vacío (raíz) - no usar "/" para evitar problemas con dobles barras
server.servlet.context-path=